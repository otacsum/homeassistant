bedroom_light_level:
  sequence:
    - alias: "Turn on or off based on brightness"
      if:
        - "{{ brightness | int > 0 }}"
      then:
        - alias: "Turn on ceiling light"
          action: switch.turn_on
          target:
            entity_id: switch.bedroom_dimmer_fan_light

        - alias: "Set brightness"
          action: number.set_value
          target:
            entity_id: number.bedroom_dimmer_fan_bright_value
          data:
            value: "{{ (brightness / 255) * 1000 }}"
      else:
        - alias: "Turn off ceiling light"
          action: switch.turn_off
          target:
            entity_id: switch.bedroom_dimmer_fan_light

bedroom_fan_speed:
  sequence:
    - alias: "Turn on or off based on percentage"
      if:
        - "{{ percentage | int > 0 }}"
      then:
        - alias: "Turn on fan"
          action: switch.turn_on
          target:
            entity_id: switch.bedroom_dimmer_fan_switch_fan

        - alias: "Set fan speed"
          action: fan.set_percentage
          target:
            entity_id: fan.bedroom_overhead_switches
          data:
            percentage: "{{ percentage }}"
      else:
        - alias: "Turn off fan"
          action: switch.turn_off
          target:
            entity_id: switch.bedroom_dimmer_fan_switch_fan
